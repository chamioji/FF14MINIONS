<div class="container">


  <div class="row">
    <div class="col s12">
      <div class="card hoverable z-depth-1">
        <div class="card-label">ランキング</div>
        <div class="card-tabs">
          <ul class="tabs tabs-fixed-width">
            <li class="tab"><a class="active" href="#characters" data-toggle="tab">キャラクター</a></li>
            <li class="tab"><a href="#minions" data-toggle="tab">ミニオン</a></li>
          </ul>
        </div>
        <div class="card-content grey lighten-4">
          <div id="characters">
            <table class="centered">
              <thead>
                <tr>
                  <th>順位</th>
                  <th></th>
                  <th>キャラクター名</th>
                  <th>サーバー名</th>
                  <th>ミニオン取得数</th>
                </tr>
              </thead>
              <tbody>

                <% @ranking_characters.each.with_index(1) do |character, i| %>
                  <tr>
                    <td><%= i %></td>
                    <td><%= image_tag "#{character.image_url}", class: "character-image-sm" %></td>
                    <td><%= link_to character.name, character_path(character) %></td>
                    <td><%= character.world %></td>
                    <td><%= character.character_minions.count %></td>
                  </tr>
                <% end %>

              </tbody>
            </table>
          </div>
          <div id="minions">
            <table class="centered">
              <thead>
                <tr>
                  <th>順位</th>
                  <th></th>
                  <th>ミニオン名</th>
                  <th>カテゴリー</th>
                  <th>取得済み</th>
                  <th>ユーザー取得率</th>
                </tr>
              </thead>
              <tbody>

                <% @ranking_minions.each.with_index(1) do |minion, i| %>
                  <tr>
                    <td><%= i %></td>
                    <td><%= image_tag "#{minion.image_url}" %></td>
                    <td><%= minion.name %></td>
                    <td><%= minion.category.name %></td>
                    <td>

                      <% if user_signed_in? %>

                        <% if current_user.current_character_id.present? %>
                          <% if minion.owned_by?(current_character) %>
                            <i class="material-icons">check</i>
                          <% end %>
                        <% end %>

                      <% end %>

                    </td>
                    <td><%= minion.rarity.round(1) %>%</td>
                  </tr>
                <% end %>

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>
